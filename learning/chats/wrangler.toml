# The name of your Worker
name = "chats"

# The main entry point for your Worker
main = "src/worker.js"

# A recent compatibility date
compatibility_date = "2024-03-01"

# --- Durable Object Binding ---
[[durable_objects.bindings]]
name = "CHAT_ROOM_DO"
class_name = "HibernatingChatRoomV2" # 确保这是你JS文件里导出的新类名

# --- R2 Storage Bucket Binding ---
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "yuangs"

# --- MIGRATION: RENAME CLASS ---
# 这会告诉 Cloudflare 将旧类重命名为新类，保留数据
[[migrations]]
tag = "v3" # 使用一个新的、唯一的标签，比如 "v3" 或 "rename-to-hibernating"
old_class = "ChatRoomV2" # 以前的类名
new_class = "HibernatingChatRoomV2" # 现在的新类名