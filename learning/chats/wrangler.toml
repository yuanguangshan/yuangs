# The name of your Worker
name = "chats"

# The main entry point for your Worker
main = "src/worker.js"

# A recent compatibility date
compatibility_date = "2024-03-01"

# --- Durable Object Binding ---
[[durable_objects.bindings]]
name = "CHAT_ROOM_DO"
# The final, correct class name
class_name = "HibernatingChatRoomV2" 

# --- R2 Storage Bucket Binding ---
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "yuangs"

# --- FINAL MIGRATION WITH HISTORY RESET ---
# This migration will resolve all conflicts.
[[migrations]]
# Use a new, unique tag for this final attempt.
tag = "v3"

# THIS IS THE KEY: Explicitly delete the                  