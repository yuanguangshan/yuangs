<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>云端待办事项</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2196f3">
    <!-- Include Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Include Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>
<body>
    <nav>
        <div class="nav-wrapper blue">
            <a href="#" class="brand-logo">
                <i class="material-icons left">check</i>
                待办事项
            </a>
        </div>
    </nav>

    <main class="container">
        <div class="row">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">添加新任务</span>
                        <div class="row">
                            <div class="input-field col s12">
                                <input type="text" id="taskInput" placeholder="输入新任务...">
                                <label for="taskInput">任务</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12 m6">
                                <input type="date" id="dueDateInput">
                                <label for="dueDateInput">截止日期</label>
                            </div>
                            <div class="input-field col s12 m6">
                                <input type="time" id="dueTimeInput">
                                <label for="dueTimeInput">截止时间</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12 m6">
                                <select id="priorityInput">
                                    <option value="low">低</option>
                                    <option value="medium" selected>中</option>
                                    <option value="high">高</option>
                                </select>
                                <label>优先级</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <textarea id="notesInput" class="materialize-textarea"></textarea>
                                <label for="notesInput">备注</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s12">
                                <button id="addTaskBtn" class="btn waves-effect waves-light blue">添加任务</button>
                                <button id="syncCalendarBtn" class="btn waves-effect waves-light orange">同步日历</button>
                                <button id="notificationBtn" class="btn waves-effect waves-light green">请求通知权限</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" id="taskSection">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">您的任务</span>
                        <div class="row">
                            <div class="col s12">
                                <ul id="taskList" class="collection">
                                    <!-- Tasks will be added here dynamically -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="app.js"></script>
    <script>
        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>