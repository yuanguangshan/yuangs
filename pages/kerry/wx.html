<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>游戏页面</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
            touch-action: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #f0f0f0;
            overflow: hidden;
        }
        #gameCanvas {
            top: 0;
            left: 0;
            background-color: #e0e0e0;
        }

        /* =================================================================== */
        /* === 新增：顶部居中控制按钮的统一优化样式 (New Optimized Styles) === */
        /* =================================================================== */

        /* 顶部按钮的容器 */
        #top-center-controls {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 15px; /* 桌面端按钮间距 */
        }

        /* 所有顶部控制按钮的通用基础样式 */
        .top-control-button {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            cursor: pointer;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.2);
            transition: all 0.2s ease;
            user-select: none;
            touch-action: manipulation;
        }

        /* 统一的悬停效果 */
        .top-control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.3);
        }

        /* 统一的点击效果 */
        .top-control-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 1px 2px rgba(0,0,0,0.1);
        }

        /* 各按钮独立的背景颜色和边框 */
        #shopButton {
            background: linear-gradient(145deg, #FFD700, #FFA500); /* 金色 */
            border: 2px solid #CC8400;
            color: #333; /* 深色文字以保证对比度 */
            text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
        }

        #cardSlotButton {
            background: linear-gradient(145deg, #6A5ACD, #483D8B); /* 石蓝色 */
            border: 2px solid #3A306B;
        }

        #helpButton {
            background: linear-gradient(145deg, #1E90FF, #0000CD); /* 道奇蓝 */
            border: 2px solid #00008B;
        }

        #soundToggle {
            background: linear-gradient(145deg, #FF6347, #CD5C5C); /* 番茄色 */
            border: 2px solid #B22222;
        }

        #soundToggle.muted {
            background: linear-gradient(145deg, #808080, #696969); /* 静音时的灰色 */
            border: 2px solid #505050;
        }

        /* ===================================== */
        /* === 响应式尺寸 (Responsive Sizes) === */
        /* ===================================== */

        /* 桌面端和平板 (宽度大于767px) */
        @media (min-width: 768px) {
            .top-control-button {
                width: 80px;
                height: 80px;
                font-size: 40px; /* 为图标提供统一的大字体 */
                border-radius: 15px;
            }
        }

        /* 移动端 (宽度小于767px) - 这里按钮会变得很小 */
        @media (max-width: 767px) {
            #top-center-controls {
                top: 10px;
                gap: 8px; /* 移动端使用更小的间距 */
            }
            .top-control-button {
                width: 45px;  /* 足够小但仍易于点击的尺寸 */
                height: 45px;
                font-size: 22px; /* 配合新尺寸调整字体大小 */
                border-radius: 10px;
            }
        }
        
        /* 为较大平板（如iPad Pro）提供稍大尺寸 */
        @media (min-width: 1024px) {
            #top-center-controls {
                gap: 20px;
            }
            .top-control-button {
                width: 90px;
                height: 90px;
                font-size: 48px;
            }
        }

        /* =================================================================== */
        /* === 以下是您原有的其他样式 (Other original styles follow) ========= */
        /* =================================================================== */

        .ui-button {
            position: absolute;
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, #4CAF50, #388E3C); /* Green gradient */
            border-radius: 15px; /* Slightly more rounded corners */
            border: 2px solid #2E7D32; /* Darker green border */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 36px;
            font-weight: bold;
            color: white; /* White text for contrast */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* Text shadow for readability */
            user-select: none;
            z-index: 10;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.2); /* Enhanced shadow */
            cursor: pointer; /* Indicate interactivity */
            transition: all 0.2s ease; /* Smooth transitions */
            touch-action: manipulation;
        }
        .ui-button:hover {
            transform: translateY(-2px); /* Lift effect on hover */
            box-shadow: 0 8px 16px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.3); /* Stronger shadow on hover */
        }
        .ui-button:active {
            transform: translateY(0); /* Press effect */
            box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 1px 2px rgba(0,0,0,0.1); /* Subtler shadow on active */
        }
        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 100; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.7); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation-name: animatetop;
            animation-duration: 0.4s
        }
        /* Add Animation */
        @keyframes animatetop {
            from {top: -300px; opacity: 0}
            to {top: 0; opacity: 1}
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .modal-content h2 {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }
        .modal-content p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        .modal-content ul {
            list-style-type: disc;
            margin-left: 20px;
            margin-bottom: 10px;
        }
        .modal-content ul li {
            margin-bottom: 5px;
        }
        .modal-content h3 {
            color: #444;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        /* 调整按钮位置，确保它们在iPad上可见 */
        @media (min-width: 768px) { /* Apply original styles for iPad and desktop */
            .ui-button {
                width: 80px;
                height: 80px;
                font-size: 36px;
            }
            #upButton {
                bottom: 220px;
                left: 100px;
            }
            #leftButton {
                bottom: 140px;
                left: 20px;
            }
            #downButton {
                bottom: 110px;
                left: 100px;
            }
            #rightButton {
                bottom: 140px;
                left: 180px;
            }
            #attackButton {
                bottom: 140px;
                right: 60px; /* 移动到右边 */
                width: 120px;
                height: 120px;
                font-size: 28px;
                background: linear-gradient(145deg, #FF4500, #DC143C); /* OrangeRed gradient */
                border-radius: 50%; /* Keep it circular */
                border: 2px solid #8B0000;
                color: white;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
                box-shadow: 0 6px 12px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.2);
                transition: all 0.2s ease;
            }
            #attackButton:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 16px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.3);
            }
            #attackButton:active {
                transform: translateY(0);
                box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 1px 2px rgba(0,0,0,0.1);
            }
            #joystickContainer {
                position: absolute;
                width: 200px;
                height: 200px;
                bottom: 60px;
                right: 200px;
                transform: none;
                z-index: 20;
            }
            #outerCircle {
                width: 180px;
                height: 180px;
                left: 10px;
                top: 10px;
            }
            #middleCircle {
                width: 120px;
                height: 120px;
                left: 40px;
                top: 40px;
            }
            #innerCircle {
                width: 60px;
                height: 60px;
                left: 70px;
                top: 70px;
            }
            #statsContainer {
                top: 20px;
                left: 20px;
                font-size: 24px;
                padding: 15px;
            }
        }
        
        /* Mobile-specific styles */
        @media (max-width: 767px) {
            .ui-button {
                width: 25px;
                height: 25px;
                font-size: 10px;
            }
            #upButton {
                bottom: 180px;
                left: 60px;
            }
            #leftButton {
                bottom: 135px;
                left: 15px;
            }
            #downButton {
                bottom: 90px;
                left: 60px;
            }
            #rightButton {
                bottom: 135px;
                left: 105px;
            }
            #moveStepDisplay {
                bottom: 135px;
                left: 60px;
                font-size: 24px;
                background-color: #f0ad4e;
            }
            #attackButton {
                bottom: 110px;
                right: 25px; /* 移动到右边 */
                width: 55px;
                height: 55px;
                font-size: 14px;
                background: linear-gradient(145deg, #FF4500, #DC143C); /* OrangeRed gradient */
                border-radius: 50%; /* Keep it circular */
                border: 2px solid #8B0000;
                color: white;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
                box-shadow: 0 6px 12px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.2);
                transition: all 0.2s ease;
            }
            #attackButton:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 16px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.3);
            }
            #attackButton:active {
                transform: translateY(0);
                box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 1px 2px rgba(0,0,0,0.1);
            }
            #joystickContainer {
                position: absolute;
                width: 90px;
                height: 90px;
                bottom: 180px; /* Further adjusted upwards */
                right: 90px; 
                transform: none;
                z-index: 20;
            }
            #outerCircle {
                width: 80px;
                height: 80px;
                left: 5px;
                top: 5px;
            }
            #middleCircle {
                width: 50px;
                height: 50px;
                left: 20px;
                top: 20px;
            }
            #innerCircle {
                width: 22px;
                height: 22px;
                left: 34px;
                top: 34px;
            }
            #statsContainer {
                font-size: 10px; /* Adjusted from 6px */
                padding: 5px 8px; /* Adjusted from 2px 3px */
                top: 5px;
                left: 5px;
                line-height: 1.2; /* Adjusted from 1.1 */
            }
        }
        .circle {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
        }
        #outerCircle {
            width: 180px;
            height: 180px;
            left: 10px;
            top: 10px;
            border: 2px solid rgba(100, 100, 100, 0.5);
        }
        #middleCircle {
            width: 120px;
            height: 120px;
            left: 40px;
            top: 40px;
            background-color: rgba(100, 100, 255, 0.5);
            cursor: pointer;
        }
        #innerCircle {
            width: 60px;
            height: 60px;
            left: 70px;
            top: 70px;
            background-color: rgba(200, 200, 255, 0.8);
        }
        
        #statsContainer {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            font-family: 'Press Start 2P', cursive;
            color: #ffd700; /* Gold color */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        #cardRevealModal {
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            overflow: hidden;
        }

        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 2s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.2; transform: scale(0.8); }
        }
        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 800px;
            border-radius: 15px;
            padding: 30px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .modal-header h2 {
            font-size: 32px;
            margin: 0;
        }
        .close-button {
            font-size: 36px;
            cursor: pointer;
            padding: 10px;
        }
        .card {
            width: 160px;
            height: 240px;
            background-color: #f0f0f0;
            border-radius: 15px;
            border: 3px solid #aaa;
            margin: 15px;
            display: inline-flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            box-sizing: border-box;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .card-title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }
        .card-image {
            width: 100px;
            height: 100px;
            background-color: #ddd;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
        }
        .card-description {
            font-size: 12px;
            text-align: center;
        }
        .card-slot-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
        }
        .card-slot {
            width: 200px;
            height: 300px;
            background-color: #e0e0e0;
            border-radius: 12px;
            border: 3px dashed #aaa;
            margin: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            color: #999;
        }
        .card-slot.filled {
            border: 3px solid #5a5;
            background-color: #efe;
        }
        .card-preview {
            width: 190px;
            height: 280px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            box-sizing: border-box;
            background-color: white;
        }
        .card-preview-title {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
        }
        .card-preview-image {
            width: 170px;
            height: 170px;
            background-color: #ddd;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
        }
        .shop-section {
            text-align: center;
            margin-bottom: 30px;
        }
        .shop-section #shopCoinsDisplay {
            font-size: 28px;
            margin-bottom: 20px;
        }
        .buy-button {
            background-color: #5a5;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 24px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .buy-button:hover {
            background-color: #494;
        }
        .shop-card-price {
            margin-top: 15px;
            font-weight: bold;
            font-size: 24px;
        }
        .slot-section-title {
            text-align: center;
            font-weight: bold;
            margin: 20px 0;
            padding: 10px;
            background-color: #eee;
            border-radius: 10px;
            font-size: 24px;
        }
        /* 游戏说明样式 */
        .help-section {
            margin-bottom: 20px;
        }
        .help-section h3 {
            margin-top: 25px;
            margin-bottom: 10px;
            color: #333;
            border-bottom: 2px solid #eee;
            padding-bottom: 5px;
        }
        .help-section p {
            margin: 10px 0;
            line-height: 1.5;
            font-size: 18px;
        }
        .help-section ul {
            margin: 10px 0;
            padding-left: 25px;
        }
        .help-section li {
            margin: 8px 0;
            line-height: 1.4;
            font-size: 16px;
        }
        .help-section .card-types {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin: 15px 0;
        }
        .help-section .card-type {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
            margin: 5px;
            width: 30%;
            min-width: 200px;
        }
        /* 血条样式 */
        .health-bar {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 20px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            z-index: 15;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ff6666);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .health-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        /* Boss血条样式 */
        .boss-health-bar {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 25px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            overflow: hidden;
            z-index: 15;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            display: none;
        }
        
        .boss-health-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B0000, #DC143C);
            border-radius: 12px;
            transition: width 0.3s ease;
        }
        
        .boss-health-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        .boss-health-label {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff4444;
            font-size: 16px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            display: none;
            z-index: 15;
        }
        
        /* 垂直血条样式 */
        .vertical-health-bar {
            position: absolute;
            width: 25px;
            height: 200px;
            background-color: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            overflow: hidden;
            z-index: 15;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        
        .player-health-bar {
            left: 10px;
            top: 20%;
            transform: translateY(-50%);
        }
        
        .boss-health-bar-vertical {
            right: 10px;
            top: 20%;
            transform: translateY(-50%);
        }
        
        .vertical-health-fill {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(0deg, #ff4444, #ff6666);
            border-radius: 12px;
            transition: height 0.3s ease;
        }
        
        .player-health-fill {
            background: linear-gradient(0deg, #4CAF50, #8BC34A);
        }
        
        .boss-health-fill-vertical {
            background: linear-gradient(0deg, #8B0000, #DC143C);
        }
        
        .vertical-health-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-90deg);
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            white-space: nowrap;
        }
        
        /* 铜板显示样式 */
        .coins-display-vertical {
            position: absolute;
            left: 45px;
            top: 50%;
            transform: translateY(-50%);
            width: 25px;
            height: 120px;
            background-color: rgba(255, 215, 0, 0.2);
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 15;
        }
        
        .coins-icon {
            font-size: 16px;
            color: #FFD700;
            margin-bottom: 5px;
        }
        
        .coins-text-vertical {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            color: #FFD700;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        /* Buff图标样式 */
        .buff-icons {
            position: absolute;
            top: 100px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 15;
        }
        
        .buff-icon {
            width: 50px;
            height: 50px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .buff-icon::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        
        .buff-icon:hover::after {
            opacity: 1;
        }
        
        #cardRevealModal .modal-content {
            display: flex;
            flex-direction: column; /* Changed to column for centering title */
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden; /* 隐藏滚动条 */
            width: 70%; /* Adjusted width */
            max-width: 1050px; /* Adjusted max-width */
            max-height: 90vh;
            padding: 40px;
        }

        #revealedCardContainer {
            display: flex;
            width: 100%;
            align-items: center;
        }

        .revealed-card-image {
            flex: 1;
            text-align: center;
            animation: slide-in-left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        .revealed-card-details {
            flex: 1;
            padding: 20px;
            color: white;
            animation: slide-in-right 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.3s forwards;
            opacity: 0;
        }

        .revealed-card-details h2 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .reveal-title {
            font-size: 2.5em;
            color: #ffd700;
            text-shadow: 0 0 5px #ffd700, 0 0 10px #ffd700, 0 0 20px #ffc400, 0 0 30px #ffc400, 0 0 40px #ff8c00, 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 20px; /* Adjusted margin */
            animation: fade-in-down 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s forwards;
            opacity: 0;
            text-align: center; /* Centered the title */
        }

        @keyframes fade-in-down {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .revealed-card-details p {
            font-size: 1.5em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .author-credit {
            font-size: 1em;
            color: rgba(255, 255, 255, 0.7);
            text-align: right;
            margin-top: 30px;
            font-style: italic;
            animation: fade-in-up 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.8s forwards;
            opacity: 0;
        }

        @keyframes fade-in-up {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slide-in-left {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slide-in-right {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* 卡牌揭示效果 */
        .reveal-content {
            animation: reveal-scale 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes reveal-scale {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0;
            animation: confetti-burst 1.5s ease-out forwards;
        }

        @keyframes confetti-burst {
            0% {
                transform: translate(0, 0) rotateZ(0);
                opacity: 1;
            }
            100% {
                transform: translate(var(--end-x), var(--end-y)) rotateZ(var(--end-rot));
                opacity: 0;
            }
        }

        /* Shop Beautification */
        #shopModal .modal-content {
            background: #2c1e12;
            background-image: radial-gradient(circle at center, #4a321f 0%, #2c1e12 70%);
            border: 2px solid #a88562;
            color: #f5eeda;
            box-shadow: 0 10px 30px rgba(0,0,0,0.7), inset 0 0 20px rgba(0,0,0,0.5);
        }

        #shopModal .modal-header {
            border-bottom: 1px solid rgba(168, 133, 98, 0.5);
            padding-bottom: 15px;
        }

        #shopModal .modal-header h2 {
            color: #ffd700;
            font-family: 'serif';
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-size: 40px;
        }

        #shopModal .close-button {
            color: #f5eeda;
            transition: color 0.3s;
        }

        #shopModal .close-button:hover {
            color: #ffd700;
        }

        #shopModal .card {
            background: transparent;
            border: none;
            box-shadow: none;
            height: auto;
        }
        
        #shopModal .card-title, #shopModal .card-description {
            color: #f5eeda;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
        }

        #shopModal .shop-card-price {
            color: #ffd700;
            font-size: 28px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            margin-top: 0;
        }

        #shopModal .buy-button {
            background: linear-gradient(180deg, #f0c14b, #d8a10e);
            border: 1px solid #a88562;
            border-radius: 10px;
            color: #111;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(255,255,255,0.3);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
            transition: all 0.2s ease;
            padding: 20px 40px;
            font-size: 28px;
        }

        #shopModal .buy-button:hover {
            background: linear-gradient(180deg, #f5d07a, #e2b12e);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <!-- 新增的顶部居中按钮容器 -->
        <div id="top-center-controls">
            <!-- 我使用了Emoji作为按钮图标，您可以替换为图片或文字 -->
            <div id="shopButton" class="top-control-button">🛒</div>
            <div id="cardSlotButton" class="top-control-button">🃏</div>
            <div id="helpButton" class="top-control-button">?</div>
            <div id="soundToggle" class="top-control-button">🔊</div>
        </div>

        <!-- 其他UI元素... -->

    </div>

    <!-- Modals and other elements would go here -->

    <script>
        // 您的游戏JavaScript逻辑
        // 例如，为声音按钮添加点击事件切换.muted类
        const soundButton = document.getElementById('soundToggle');
        soundButton.addEventListener('click', () => {
            soundButton.classList.toggle('muted');
            // 在这里添加静音/取消静音的逻辑
            if (soundButton.classList.contains('muted')) {
                soundButton.textContent = '🔇'; // 可选：切换图标
            } else {
                soundButton.textContent = '🔊';
            }
        });
    </script>
</body>
</html>
