<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>太阳系介绍</title>
    <style>
        html {
            box-sizing: border-box;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #0c1427; /* Dark blue background */
            color: #e0e0e0;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            width: 100vw; 
        }

        .solar-system-container {
            background-color: #1a2340; 
            border-radius: 10px;
            padding: 20px 30px;
            width: 95%; 
            max-width: 1200px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            max-height: 95vh; 
            overflow-y: auto; 
            display: flex;
            flex-direction: column;
        }

        header h1 {
            color: #66ccff; 
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            text-align: center;
            color: #a0b0c0;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .planet-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            flex-shrink: 0; 
        }

        .planet-tabs button {
            background-color: #2a3858;
            color: #c0d0e0;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s, color 0.3s;
        }

        .planet-tabs button:hover {
            background-color: #3a4c70;
        }

        .planet-tabs button.active {
            background-color: #66ccff;
            color: #1a2340;
            font-weight: bold;
        }

        main {
            display: flex;
            gap: 20px;
            flex-grow: 1; 
            min-height: 0; 
        }

        .simulation-area {
            flex: 2; 
            min-width: 300px; 
            background-color: #0a101f; 
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            min-height: 300px; 
            position: relative; 
            overflow: hidden; 
        }

        #solarSystemCanvas {
            display: block; 
            max-width: 100%;
            max-height: 100%;
            border-radius: 5px;
        }

        .info-panel {
            flex: 1; 
            min-width: 280px; 
            background-color: #222d4b; 
            padding: 20px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }

        .info-panel h2 {
            color: #66ccff;
            text-align: center;
            margin-top: 0;
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        .info-panel h2 a {
            color: inherit; 
            text-decoration: none;
        }
        .info-panel h2 a:hover {
            text-decoration: underline;
        }


        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
            font-size: 0.9em;
        }

        .info-grid p {
            margin: 0 0 5px 0;
            color: #a0b0c0;
        }

        .info-grid strong {
            color: #e0e0e0;
            font-size: 1.1em;
        }

        .info-panel #planetDescription {
            font-size: 0.85em;
            line-height: 1.6;
            color: #c0d0e0;
            flex-grow: 1; 
        }

        footer {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-shrink: 0; 
        }

        footer button {
            background-color: #3a4c70;
            color: #e0e0e0;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s;
        }

        footer button:hover {
            background-color: #4a5c80;
        }

        @media (max-width: 900px) {
            main {
                flex-direction: column;
            }
            .simulation-area {
                min-height: 300px; 
                max-height: 40vh; 
            }
            .info-panel {
                max-height: 45vh; 
                overflow-y: auto;
            }
        }
        @media (max-width: 600px) {
            .solar-system-container {
                width: 100%;
                height: 100vh; 
                max-height: 100vh;
                border-radius: 0;
                padding: 10px;
            }
            header h1 {
                font-size: 1.8em;
            }
            header p {
                font-size: 0.8em;
            }
            .planet-tabs button, footer button {
                padding: 8px 12px;
                font-size: 0.8em;
            }
            .info-grid {
                grid-template-columns: 1fr; 
                gap: 10px;
            }
            .simulation-area {
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="solar-system-container">
        <header>
            <h1>太阳系介绍</h1>
            <p>探索我们太阳系的奇妙世界 - 每个行星都是一个标签页，点击标签查看行星详细信息，同时观察它们围绕太阳的动态轨道。点击标题直达维基百科词条。</p>
        </header>

        <div class="planet-tabs">
            <!-- Tabs will be generated by JavaScript -->
        </div>

        <main>
            <div class="simulation-area">
                <canvas id="solarSystemCanvas"></canvas>
            </div>
            <div class="info-panel">
                <h2 id="planetName">水星</h2>
                <div class="info-grid">
                    <div>
                        <p>距太阳距离</p>
                        <strong id="planetDistance">0.39 AU</strong>
                    </div>
                    <div>
                        <p>公转周期</p>
                        <strong id="planetPeriod">88 天</strong>
                    </div>
                    <div>
                        <p>直径</p>
                        <strong id="planetDiameter">4,879 km</strong>
                    </div>
                    <div>
                        <p>表面温度</p>
                        <strong id="planetTemperature">430°C / -180°C</strong>
                    </div>
                </div>
                <p id="planetDescription">水星是太阳系中最小的行星，也是离太阳最近的行星。它的表面布满了陨石坑，类似于月球。由于没有大气层，水星上的温度变化极大，白天可达430℃，夜晚则降至-180℃。</p>
            </div>
        </main>

        <footer>
            <button id="slowDown">减速</button>
            <button id="speedUp">加速</button>
            <button id="pauseResume">暂停</button>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('solarSystemCanvas');
            const ctx = canvas.getContext('2d');

            const planetTabsContainer = document.querySelector('.planet-tabs');
            const planetNameEl = document.getElementById('planetName');
            const planetDistanceEl = document.getElementById('planetDistance');
            const planetPeriodEl = document.getElementById('planetPeriod');
            const planetDiameterEl = document.getElementById('planetDiameter');
            const planetTemperatureEl = document.getElementById('planetTemperature');
            const planetDescriptionEl = document.getElementById('planetDescription');

            const slowDownBtn = document.getElementById('slowDown');
            const speedUpBtn = document.getElementById('speedUp');
            const pauseResumeBtn = document.getElementById('pauseResume');

            const planetsData = [
                {
                    name: "水星",
                    color: "#9c9c9c",
                    orbitRadius: 60,
                    displayRadius: 4,
                    speed: 0.018,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "0.39 AU",
                        period: "88 天",
                        diameter: "4,879 km",
                        temperature: "430°C / -180°C",
                        description: "水星是太阳系中最小、也最靠近太阳的行星，轨道偏心率很大，近日点和远日点距离相差约 1.5 倍。它没有像样的大气层，只存在极其稀薄的外逸层，因此无法保温，昼夜温差极端：白天赤道附近可达约 430°C，夜间可降至约 -180°C。表面布满撞击坑、盆地和断崖，外观和月球类似，其中直径约 1,550 km 的卡洛里盆地是最大撞击结构之一。内部由巨大的铁核、较薄的硅酸盐地幔和地壳组成，核心占总体积约 55%，密度在行星中仅次于地球。水星自转与公转呈 3:2 自旋轨道共振----自转 3 圈恰好绕太阳公转 2 圈，因此一\"太阳日\"约等于两个水星年。极区永远不被阳光照到的环形山底部保留有水冰。水星没有天然卫星，是太阳系中观测难度最大但物理特性非常极端的类地行星。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E6%B0%B4%E6%98%9F"
                    }
                },
                {
                    name: "金星",
                    color: "#e6b800",
                    orbitRadius: 90,
                    displayRadius: 7,
                    speed: 0.012,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "0.72 AU",
                        period: "225 天",
                        diameter: "12,104 km",
                        temperature: "462°C",
                        description: "金星是离太阳第二近、大小最接近地球的类地行星，因此常被称为\"地球的姊妹星\"。但它拥有四颗类地行星中最浓厚的大气层，大气约 96.5% 为二氧化碳、约 3.5% 为氮，地表气压约为地球的 92 倍，相当于在地球海面下约 1 km 的压力。强烈的温室效应使其平均表面温度高达约 735 K（462°C），是太阳系中最热的行星。金星被高反射率的硫酸云彻底覆盖，以可见光几乎无法直接观测其表面。雷达测绘显示，金星表面大量为火山平原，散布着盾状火山和平顶火山，并有少量大型撞击坑，说明其地壳在 3～6 亿年前曾经历大规模整体重铺。金星自转极慢且为逆行自转，恒星自转周期约 243 地球日，而一\"太阳日\"约为 116.75 地球日，且从表面看太阳会从西边升起、东边落下。金星无天然卫星，是行星气候失控温室效应的重要研究对象。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E9%87%91%E6%98%9F"
                    }
                },
                {
                    name: "地球",
                    color: "#3366cc",
                    orbitRadius: 130,
                    displayRadius: 8,
                    speed: 0.01,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "1 AU",
                        period: "365.25 天",
                        diameter: "12,742 km",
                        temperature: "平均 15°C",
                        description: "地球是太阳系中第三颗行星，也是目前已知唯一存在生命的天体。地球质量约 5.97×10^24 kg，平均半径约 6,371 km，是最大的岩石行星。内部具有典型的分层结构，包括固体地壳、硅酸盐地幔和金属铁镍核，其中外核为液态并产生地磁场，有效抵御太阳风侵蚀。地表约 71% 被海洋覆盖，水圈与大气圈共同调节气候，保持适宜温度。大气主要成分为氮气（约 78%）和氧气（约 21%），并存在微量二氧化碳、水汽和其他气体。在约 45 亿年的演化中，地球经历了多次全球性冰期和至少五次大规模物种灭绝事件，目前已发现的物种中超过 99% 已经灭绝。地球自转导致昼夜交替，绕太阳公转并伴随 23.4° 的轴倾角产生四季。地球拥有唯一一颗大型天然卫星----月球，潮汐作用有助于稳定自转轴，为复杂生命的长期演化提供稳定环境。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E5%9C%B0%E7%90%83"
                    }
                },
                {
                    name: "火星",
                    color: "#ff4500",
                    orbitRadius: 170,
                    displayRadius: 5,
                    speed: 0.008,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "1.52 AU",
                        period: "687 天",
                        diameter: "6,779 km",
                        temperature: "-143°C 至 35°C",
                        description: "火星是太阳系中第四颗行星，也是仅次于水星的第二小行星。它的平均半径约为地球的一半，质量约为地球的 11%，表面重力约为地球的 38%。大气极为稀薄，主要由二氧化碳构成，平均地表气压仅为地球的约 0.6%。火星南半球为古老而布满撞击坑的高地，北半球多为低海拔的年轻平原；其上拥有太阳系最高的火山----奥林帕斯山（高约 21 km），以及巨大的水手号峡谷系统，长度接近 4,000 km。两极存在由水冰和干冰组成的极冠，雷达观测和着陆器实验证实地下广泛存在富水冰冻土层。多种河道和三角洲地貌表明火星早期可能存在长期稳定的液态水甚至海洋。火星自转周期约 24.6 小时，轴倾角约 25°，与地球类似，因此同样具有明显季节变化。科学家通过轨道器和漫游车持续探索火星，重点关注水循环、气候演化以及生命存在的可能性。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E7%81%AB%E6%98%9F"
                    }
                },
                {
                    name: "木星",
                    color: "#ffad33",
                    orbitRadius: 230,
                    displayRadius: 15,
                    speed: 0.004,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "5.2 AU",
                        period: "11.86 年",
                        diameter: "139,820 km",
                        temperature: "云顶 -145°C",
                        description: "木星是太阳系中体积和质量最大的行星，质量约为地球的 318 倍，体积约为地球的 1,321 倍，是典型的气体巨行星。它主要由约 71% 的氢和 24% 的氦组成，内部可能存在岩石核心和广阔的液态金属氢层。木星自转非常快速，自转一圈不到 10 小时，使其呈现明显的赤道鼓起形态。大气层中分布着明暗相间的云带和大量涡旋，其中最著名的是大红斑----一场至少持续了 300 年以上的巨大反气旋风暴，面积可容纳 2～3 个地球。木星拥有强大的磁场，其磁矩约为地球的上万倍，形成的磁层极其庞大，可延伸至土星轨道附近。木星至少有 95 颗已知卫星，其中伽利略卫星（木卫一、木卫二、木卫三、木卫四）规模接近甚至超过水星：如木卫三是太阳系最大卫星，木卫二和木卫四则被认为拥有地下液态海洋，是探索地外生命的重要目标。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E6%9C%A8%E6%98%9F"
                    }
                },
                {
                    name: "土星",
                    color: "#e6e69a",
                    orbitRadius: 290,
                    displayRadius: 12,
                    speed: 0.003,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "9.58 AU",
                        period: "29.45 年",
                        diameter: "116,460 km",
                        temperature: "云顶 -178°C",
                        description: "土星是太阳系中第二大的行星，是一颗以氢和氦为主的气体巨行星。它的平均半径约为地球的 9 倍，但平均密度仅约 0.69 g/cm³，比水还轻。土星最著名的特征是其庞大而明亮的行星环系统，由无数冰粒、岩石碎屑和尘埃组成，分布在多个主要环带（如 A 环、B 环）和缝隙（如卡西尼缝）中。土星大气呈淡黄色，顶层为氨冰云，云带对比度较木星弱，但高空风速可达每小时约 1,800 km。内部持续向外释放热量，其辐射能量约为自太阳获得能量的 2.5 倍，部分来源于氦雨下沉释放的引力势能。土星至少拥有 274 颗已确认卫星，其中土卫六（泰坦）是最大的一颗，体积超过水星，拥有以氮气为主的浓厚大气，表面存在甲烷湖泊和河道，是类比早期地球环境的重要对象；土卫二（恩克拉多斯）则具有喷射水冰的南极喷泉，推测其冰壳下存在全球性液态海洋。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E5%9C%9F%E6%98%9F"
                    }
                },
                {
                    name: "天王星",
                    color: "#99ccff",
                    orbitRadius: 340,
                    displayRadius: 10,
                    speed: 0.002,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "19.2 AU",
                        period: "84 年",
                        diameter: "50,724 km",
                        temperature: "云顶 -214°C",
                        description: "天王星是太阳系中离太阳第七近的行星，质量约为地球的 14.5 倍，体积约为地球的 63 倍，是一颗典型的冰巨行星。除氢和氦外，其内部含有大量的水、氨和甲烷等\"冰\"，内部结构由岩石核心、冰质地幔和外层气体包壳组成。大气中的甲烷吸收红光，使天王星呈现淡蓝绿色。天王星最大的特点是自转轴相对轨道平面倾斜约 98°，几乎\"侧躺\"着绕太阳公转，因此每个极点会经历长达约 42 年的极昼与 42 年的极夜，带来极为特殊的季节变化。天王星内部能量输出很低，几乎不比从太阳接收到的多多少，是内热最弱的巨行星，其原因仍未完全明了。它有暗淡而狭窄的行星环系统以及近 30 颗卫星，多以莎士比亚和蒲柏作品中的角色命名。唯一一次近距离探测来自 1986 年的旅行者 2 号飞掠。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E5%A4%A9%E7%8E%8B%E6%98%9F"
                    }
                },
                {
                    name: "海王星",
                    color: "#3366ff",
                    orbitRadius: 380,
                    displayRadius: 9,
                    speed: 0.0015,
                    angle: Math.random() * 2 * Math.PI,
                    info: {
                        distance: "30.1 AU",
                        period: "164.8 年",
                        diameter: "49,244 km",
                        temperature: "云顶 -218°C",
                        description: "海王星是太阳系中离太阳最远的行星，质量约为地球的 17 倍，是一颗冰巨行星。它是唯一一颗先由数学计算预测其存在、后再通过望远镜观测证实的行星。大气成分以氢和氦为主，并含有甲烷及少量更复杂的烃类，较少的高空薄雾使其呈现鲜艳的深蓝色。海王星内部释放的能量约为自太阳获得能量的 2.6 倍，是驱动其极端气候的主要来源。观测显示其大气风速可达每小时 2,000 多公里，是太阳系已知风速最高的行星；1989 年旅行者 2 号发现的大暗斑就是类似木星大红斑的巨大风暴系统，不过这些暗斑会随时间消失和重生。海王星拥有暗淡的行星环和至少 16 颗卫星，其中最大的是海卫一（崔顿），以逆行轨道绕行，表面极冷，具有稀薄氮气大气和活跃的冰火山活动，被认为是被捕获的柯伊伯带天体。迄今唯一的近距探测同样来自 1989 年的旅行者 2 号飞掠。",
                        wikiLink: "https://zh.wikipedia.org/wiki/%E6%B5%B7%E7%8E%8B%E6%98%9F"
                    }
                }
            ];
            
            const maxDataOrbitRadius = planetsData.reduce((max, p) => Math.max(max, p.orbitRadius), 0);

            let selectedPlanet = planetsData[0];
            let animationId;
            let isPaused = false;
            let speedMultiplier = 1.0;

            let stars = [];
            const NUM_STARS = 100;
            let starAnimationTime = 0;

            function initializeStars() {
                stars = [];
                if (canvas.width <=0 || canvas.height <=0) return; // Prevent error if canvas not sized
                for (let i = 0; i < NUM_STARS; i++) {
                    stars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 1.0 + 0.2, 
                        initialOpacity: Math.random() * 0.4 + 0.2 
                    });
                }
            }
            
            function resizeCanvas() {
                const simulationArea = canvas.parentElement;
                const availableWidth = simulationArea.clientWidth;
                const availableHeight = simulationArea.clientHeight;
            
                const oldWidth = canvas.width;
                const oldHeight = canvas.height;
            
                canvas.width = Math.max(50, availableWidth - 20); 
                canvas.height = Math.max(50, availableHeight - 20);
            
                if (canvas.width !== oldWidth || canvas.height !== oldHeight) {
                    initializeStars();
                }
            }
            window.addEventListener('resize', resizeCanvas);
            

            function updateInfoPanel(planet) {
                planetNameEl.innerHTML = ''; 
                const link = document.createElement('a');
                link.textContent = planet.name;
                link.href = planet.info.wikiLink;
                link.target = "_blank"; 
                planetNameEl.appendChild(link);

                planetDistanceEl.textContent = planet.info.distance;
                planetPeriodEl.textContent = planet.info.period;
                planetDiameterEl.textContent = planet.info.diameter;
                planetTemperatureEl.textContent = planet.info.temperature;
                planetDescriptionEl.textContent = planet.info.description;

                document.querySelectorAll('.planet-tabs button').forEach(btn => {
                    btn.classList.toggle('active', btn.textContent === planet.name);
                });
            }

            function createPlanetTabs() {
                planetsData.forEach(planet => {
                    const button = document.createElement('button');
                    button.textContent = planet.name;
                    button.addEventListener('click', () => {
                        selectedPlanet = planet;
                        updateInfoPanel(planet);
                    });
                    planetTabsContainer.appendChild(button);
                });
            }

            function drawSun(centerX, centerY) {
                ctx.beginPath();
                const sunRadius = Math.min(canvas.width, canvas.height) * 0.04; 
                ctx.arc(centerX, centerY, Math.max(5, sunRadius), 0, 2 * Math.PI);
                
                const sunGradient = ctx.createRadialGradient(centerX, centerY, sunRadius * 0.2, centerX, centerY, sunRadius);
                sunGradient.addColorStop(0, 'yellow');
                sunGradient.addColorStop(0.6, 'orange');
                sunGradient.addColorStop(1, 'red');
                
                ctx.fillStyle = sunGradient;
                ctx.shadowBlur = Math.max(5, sunRadius) * 1.5;
                ctx.shadowColor = "orange";
                ctx.fill();
                ctx.shadowBlur = 0;
            }

            function drawPlanet(planet, centerX, centerY) {
                const minCanvasDim = Math.min(canvas.width, canvas.height);
                const maxDisplayableOrbitRadius = (minCanvasDim / 2) * 0.90; 
                const orbitScaleFactor = maxDataOrbitRadius > 0 ? maxDisplayableOrbitRadius / maxDataOrbitRadius : 1;

                const currentOrbitRadius = planet.orbitRadius * orbitScaleFactor;

                const planetDisplayScale = minCanvasDim / 1000; 
                const currentDisplayRadius = Math.max(2, planet.displayRadius * planetDisplayScale * 1.5);

                const x = centerX + currentOrbitRadius * Math.cos(planet.angle);
                const y = centerY + currentOrbitRadius * Math.sin(planet.angle);

                ctx.beginPath();
                ctx.arc(centerX, centerY, currentOrbitRadius, 0, 2 * Math.PI);
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)'; 
                ctx.lineWidth = 0.5; // Thinner orbit lines
                ctx.stroke();
                
                ctx.beginPath();
                ctx.arc(x, y, currentDisplayRadius, 0, 2 * Math.PI);
                ctx.fillStyle = planet.color;
                ctx.fill();
                ctx.lineWidth = 1; // Reset line width for planet highlight

                if (planet === selectedPlanet) {
                    ctx.strokeStyle = '#66ccff';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    ctx.lineWidth = 1; 
                }
            }
            
            function drawStars() {
                stars.forEach((star) => {
                    const twinkleFactor = (Math.sin(starAnimationTime + star.x * 0.05 + star.y * 0.005) + 1) / 2;
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, 2 * Math.PI);
                    ctx.fillStyle = `rgba(255, 255, 255, ${star.initialOpacity * (0.5 + twinkleFactor * 0.5)})`;
                    ctx.fill();
                });
            }

            function animate() {
                if (document.hidden) { 
                    animationId = requestAnimationFrame(animate);
                    return;
                }
                if (!isPaused) {
                    starAnimationTime += 0.01; 
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = '#0a101f';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    drawStars();

                    const centerX = canvas.width / 2;
                    const centerY = canvas.height / 2;

                    drawSun(centerX, centerY);

                    planetsData.forEach(planet => {
                        drawPlanet(planet, centerX, centerY);
                        planet.angle += planet.speed * speedMultiplier;
                    });
                }
                animationId = requestAnimationFrame(animate);
            }

            slowDownBtn.addEventListener('click', () => {
                speedMultiplier = Math.max(0.1, speedMultiplier / 1.5);
            });
            speedUpBtn.addEventListener('click', () => {
                speedMultiplier = Math.min(10, speedMultiplier * 1.5);
            });
            pauseResumeBtn.addEventListener('click', () => {
                isPaused = !isPaused;
                pauseResumeBtn.textContent = isPaused ? '继续' : '暂停';
            });

            canvas.addEventListener('click', (event) => {
                const rect = canvas.getBoundingClientRect();
                const clickX = event.clientX - rect.left;
                const clickY = event.clientY - rect.top;
                
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;

                const minCanvasDim = Math.min(canvas.width, canvas.height);
                const maxDisplayableOrbitRadius = (minCanvasDim / 2) * 0.90;
                const orbitScaleFactor = maxDataOrbitRadius > 0 ? maxDisplayableOrbitRadius / maxDataOrbitRadius : 1;
                const planetDisplayScale = minCanvasDim / 1000;

                for (let i = planetsData.length - 1; i >= 0; i--) {
                    const planet = planetsData[i];
                    const currentOrbitRadius = planet.orbitRadius * orbitScaleFactor;
                    const currentDisplayRadius = Math.max(2, planet.displayRadius * planetDisplayScale * 1.5);

                    const planetX = centerX + currentOrbitRadius * Math.cos(planet.angle);
                    const planetY = centerY + currentOrbitRadius * Math.sin(planet.angle);
                    const distance = Math.sqrt((clickX - planetX)**2 + (clickY - planetY)**2);
                    
                    if (distance < currentDisplayRadius + 5) { 
                        selectedPlanet = planet;
                        updateInfoPanel(planet);
                        break; 
                    }
                }
            });

            resizeCanvas();       
            createPlanetTabs();
            updateInfoPanel(selectedPlanet);
            animate();

            setTimeout(() => {
                resizeCanvas();
            }, 100);
        });
    </script>
</body>
</html>